{% load filter_filename i18n %}
{% load whitespace_cleanup %}

<ul class="download_files">
{% for file in extraction_order.output_files.all %}
    {% if file.deleted_on_filesystem %}
        <li data-file-deleted title="{{ file.file|filter_filename }} is already deleted">{{ file.download_file_name }}</li>
    {% else %}
    <li>{% include 'excerptexport/partials/download_content_file_label.html' with content_type=file.content_type %}:
        <a href="{{ file.get_absolute_url }}">{{ file.download_file_name }}</a>
        <a href="mailto:?{% filter remove_all_whitespace %}
        subject=
            {% filter urlencode %}Download map data of {{ extraction_order.excerpt_name }}{% endfilter %}
        &
        body=
            {% filter urlencode %}{% filter strip %}
                    {% include 'excerptexport/partials/content_file_type_description.html' with content_type=file.content_type %}
                {% endfilter %} ({{ file.content_type }}): {{ protocol }}://{{ host_domain }}{{ file.get_absolute_url }}{% endfilter %}
        {% endfilter %}">
            <button>&#9993; {% trans 'Send link' %}</button>
        </a>
        <div class="copy-link">
            {% spaceless %}
                <label>{% trans 'Copy link:'%} </label>
                <textarea class="form-control">{{ protocol }}://{{ host_domain }}{{ file.get_absolute_url }}</textarea>
            {% endspaceless %}
        </div>
    </li>
    {% endif %}
{% endfor %}
</ul>
